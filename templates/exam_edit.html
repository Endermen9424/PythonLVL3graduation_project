<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script>
    let questionCount = 0;

    function addQuestion() {
        questionCount++;

        const div = document.createElement("div");
        div.innerHTML = `
            <hr>
            <label>Soru ${questionCount}</label><br>
            <input type="text" name="question_${questionCount}" required><br>

            <input type="text" name="A)${questionCount}" placeholder="A" required><br>
            <input type="text" name="B)${questionCount}" placeholder="B" required><br>
            <input type="text" name="C)${questionCount}" placeholder="C" required><br>
            <input type="text" name="D)${questionCount}" placeholder="D" required><br>

            <select name="correct_${questionCount}">
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>
        `;
        document.getElementById("questions").appendChild(div);
    }
    </script>

</head>
<body>
 {% block content %}
<div class="container">

    <aside class="sidebar">
        <h2>MindClass</h2>
        <ul>
            <li><a href="/">Anasayfa</a></li>
            <li><a href="/ogrenciler">Öğrenciler</a></li>
            <li><a href="/dersler">Dersler</a></li>
            <li class="active"><a href="/sinavlar">Sınavlar</a></li>
        </ul>
    </aside>

    <main class="main">
        {% if error %}
        <div class="error-message">{{ error }}</div>
        {% endif %}

            <div class="card">
            <form action="/sinavlar/edit/{{ exam_name }}" method="post">
                <label for="exam_name">Sınav Adı:</label>
                <input type="text" id="exam_name" name="exam_name" value="{{ exam_name }}" required>

                <label for="description">Açıklama:</label>
                <input type="text" id="description" name="description" value="{{ exam_description }}" required>

                <label for="lessons_name">Ders:</label>
                <input type="text" id="lessons_name" name="lessons_name" value="{{ lesson_name }}" required>

                <h3>Mevcut Sorular:</h3>
                <div id="questions">
                {% if exam_questions %}
                    {% for question in exam_questions %}
                    <div>
                        <hr>
                        <label>Soru {{ loop.index }}</label><br>
                        <input type="text" name="question_{{ loop.index }}" value="{{ question.question }}" required><br>
                        
                        <input type="text" name="A){{ loop.index }}" placeholder="A" value="{{ question.options[0] }}" required><br>
                        <input type="text" name="B){{ loop.index }}" placeholder="B" value="{{ question.options[1] }}" required><br>
                        <input type="text" name="C){{ loop.index }}" placeholder="C" value="{{ question.options[2] }}" required><br>
                        <input type="text" name="D){{ loop.index }}" placeholder="D" value="{{ question.options[3] }}" required><br>
                        
                        <select name="correct_{{ loop.index }}">
                            <option value="A" {% if question.correct == 0 %}selected{% endif %}>A</option>
                            <option value="B" {% if question.correct == 1 %}selected{% endif %}>B</option>
                            <option value="C" {% if question.correct == 2 %}selected{% endif %}>C</option>
                            <option value="D" {% if question.correct == 3 %}selected{% endif %}>D</option>
                        </select>
                    </div>
                    {% endfor %}
                {% endif %}
                </div>

                <button type="button" onclick="addQuestion()">Soru Ekle</button>

                <button type="submit">Sınavı Güncelle</button>
            </form>
    </main>

</div>
{% endblock %}
</body>
</html>
